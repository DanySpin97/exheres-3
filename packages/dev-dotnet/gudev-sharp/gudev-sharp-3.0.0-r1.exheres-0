# Copyright 2015 Volodymyr Medvid <vmedvid@riseup.net>
# Distributed under the terms of the GNU General Public License v2

require github [ user=mono ] autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.15 ] ]

SUMMARY=".NET binding to gudev"
DESCRIPTION="
GUdev# allows access to device information from a C# program using Mono.
"

PLATFORMS="~amd64"
LICENCES="LGPL-2.1"
SLOT="3"
MYOPTIONS=""

DEPENDENCIES="
    build:
        virtual/pkg-config
    build+run:
        dev-lang/mono[>=2.0]
        gnome-bindings/gtk-sharp:3[>=2.99.0]
        gnome-desktop/libgudev[>=146]
"

DEFAULT_SRC_PREPARE_PATCHES=(
    -p2 "${FILES}"/gudev.patch
)

DEFAULT_SRC_CONFIGURE_PARAMS=( CSC=/usr/$(exhost --target)/bin/mcs )

src_prepare() {
    # Rely on ${PKG_CONFIG} instead of pkg-config
    edo sed -e '/AC_PATH_PROG(PKG_CONFIG/d' -i configure.ac

    autotools_src_prepare
}

