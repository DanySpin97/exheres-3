# Copyright 2015 Volodymyr Medvid <vmedvid@riseup.net>
# Distributed under the terms of the GNU General Public License v2

require github [ user=mono ] autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.13 ] ]

SUMMARY=".NET binding to gudev"
DESCRIPTION="
GUdev# allows access to device information from a C# program using Mono on Linux.
"

PLATFORMS="~amd64"
LICENCES="LGPL-2.1"
SLOT="3"
MYOPTIONS=""

DEPENDENCIES="
    build+run:
        dev-lang/mono[>=2.0]
        gnome-bindings/gtk-sharp:3[>=2.99.0]
        sys-apps/systemd[>=146] [[ description = [ for udev ] ]]
    build:
        virtual/pkg-config
"

src_prepare() {
    default

    # set proper ${LIBDIR}
    edo sed \
        -e "s:\(prefix[)}@]\?/\)lib:\1${LIBDIR}:g" \
        -i gudev/Makefile.am \
        -i gudev-sharp-3.0.pc.in
    # fix wrong mask for generated sources
    edo sed \
        -e '/^GENERATED_SOURCES/s:\*\.cs:*\/*.cs:' \
        -i configure.ac
    eautoreconf
}

